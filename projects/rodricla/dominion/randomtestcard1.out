File 'randomtestcard1.c'
Lines executed:95.52% of 67
Branches executed:100.00% of 10
Taken at least once:60.00% of 10
Calls executed:91.18% of 34
Creating 'randomtestcard1.c.gcov'

File 'dominion.c'
Lines executed:30.99% of 568
Branches executed:28.54% of 417
Taken at least once:19.90% of 417
Calls executed:22.45% of 98
Creating 'dominion.c.gcov'

        -:    0:Source:randomtestcard1.c
        -:    0:Graph:randomtestcard1.gcno
        -:    0:Data:randomtestcard1.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "dominion.h"
        -:    2:#include "dominion_helpers.h"
        -:    3:#include "rngs.h"
        -:    4:#include <stdio.h>
        -:    5:#include <math.h>
        -:    6:#include <stdlib.h>
        -:    7:#include <assert.h>
        -:    8:#include "test_helpers.h"
        -:    9:
function main called 1 returned 100% blocks executed 93%
        1:   10:int main(int argc, char *argv[]) 
        -:   11:{
        -:   12:	
        -:   13:	//an introduction
        1:   14:	printf("----STARTING RANDOM TESTS----\n\n\n");
call    0 returned 100%
        1:   15:	printf("----Welcome to randomtestcard1.c, home of Random Card Test 1----\n");
call    0 returned 100%
        1:   16:	printf("----This file facilitates random  tests for the Smithy Card ----\n");
call    0 returned 100%
        1:   17:	printf("-----Smithy is an Action card from the Base Set----\n");
call    0 returned 100%
        1:   18:	printf("-----Smithy's purpose is to increase the handside by drawing three cards----\n");
call    0 returned 100%
        1:   19:	printf("-----Smithy is a terminal card, meaning that it provides no +Action---\n");
call    0 returned 100%
        -:   20:	
        1:   21:	int card=smithy;
        1:   22:	int numPlayers=2;
        1:   23:	int seed=420;
        1:   24:	int handpos=0;
        1:   25:	int choice1=0;
        1:   26:	int choice2=0;
        1:   27:	int choice3=0;
        1:   28:	int bonus = 0;
        1:   29:	struct gameState *smithyTest=newGame();
call    0 returned 100%
        1:   30:	struct gameState *save=newGame();
call    0 returned 100%
        1:   31:	int *smithyTestKC=kingdomCards(adventurer, gardens, embargo, village, minion, mine, cutpurse, sea_hag, tribute, smithy);
call    0 returned 100%
        1:   32:	initializeGame(numPlayers, smithyTestKC, seed, smithyTest);
call    0 returned 100%
        1:   33:	*save=*smithyTest;
        1:   34:	printf("TEST CASE PARAMETERS: %i players, ", smithyTest->numPlayers);
call    0 returned 100%
        -:   35:	//relevant player=rp
        1:   36:	int rp=smithyTest->whoseTurn;
        1:   37:	printf("testing with player %i.\n", rp+1);
call    0 returned 100%
        -:   38:	//placing Smithy in players hand
        1:   39:	printf("Placing Smithy (enum %i) in player %i's hand at position %i\n",smithy, rp, handpos);
call    0 returned 100%
        -:   40:	
        1:   41:	smithyTest->hand[rp][handpos]=smithy;
        -:   42:	//hcb=hand count before
        1:   43:	int hcb=smithyTest->handCount[rp];
        1:   44:	printf("Player %i's handcount before being run is %i", rp, hcb);
call    0 returned 100%
        -:   45:	
        -:   46:	//played card count before
        1:   47:	int pccb=smithyTest->playedCardCount;
        1:   48:	printf("The overall played card count before playing is %i", pccb);
call    0 returned 100%
        -:   49:	
        -:   50:	//pcsb=played card status before
        1:   51:	int pcsb=smithyTest->playedCards[pccb];
        -:   52:	
        -:   53:	//exPCCA=expected played card count after
        1:   54:	int exPCCA=pccb+1;
        -:   55:	//exHCA=expected hand count after: draw three, discard this one; result in 2to more
        1:   56:	int exHCA=hcb+2;
        -:   57:	//exPCSA=expecte played card status after
        -:   58:	//int exPCSA=smithy;
        -:   59:	
        -:   60:	//actHCA=actual hand count after
        1:   61:	int actHCA=0;
        -:   62:	
        1:   63:	printf("Player %i's hand count before cardEffect is called with Smithy is: %i\n", rp+1, hcb);
call    0 returned 100%
        1:   64:	printf("Here is the deck state before\n");
call    0 returned 100%
        -:   65://	printPlayerDeck(rp, smithyTest);
        1:   66:	printf("The games played card count before is %i\n", pccb);
call    0 returned 100%
        -:   67:	//printf("Games last played card is %i\n", pcsb);
        1:   68:	int randomCounter=0;//This keeps track of which random test case we are running. 
        -:   69:	//The first test randomizes the handpos of the smithy card i.e. the placement of the card
        -:   70:	//the lower boundary is -1 and the upper boundary is one plus the handcount. 
        1:   71:	int lowerBoundary=-1;
        1:   72:	int upperBoundary=smithyTest->handCount[rp];
        -:   73:
        -:   74:		
        1:   75:	printf("--TEST CASE %i: calling with card:\n%i, choice1: %i, choice2: %i, choice3: %i, smithyTest: %p, handpos: %i, bonus: %p--\n",randomCounter,  card, choice1, choice2, choice3, smithyTest, handpos, &bonus);
call    0 returned 100%
        1:   76:	cardEffect(card, choice1, choice2, choice3, smithyTest, handpos, &bonus);
call    0 returned 100%
        1:   77:	actHCA=smithyTest->handCount[rp];
        1:   78:	printf("--STEP 1: Checking hand counts--\n");
call    0 returned 100%
        1:   79:	if (actHCA==exHCA)
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
        -:   80:	{
    #####:   81:		printf("SUCCESS: new handcount is %i\n", smithyTest->handCount[rp]);
call    0 never executed
        -:   82:	}
        -:   83:	else
        -:   84:	{
        1:   85:		printf("FAILURE: handcount has %i cards instead of required %i\n", smithyTest->handCount[rp], save->handCount[rp]+2);
call    0 returned 100%
        -:   86:	}
        -:   87:	//printPlayerHand(rp, smithyTest);
        1:   88:	printf("--STEP 2: Checking that expected played card count matches actual played card count--\n");
call    0 returned 100%
        1:   89:	if (exPCCA!=smithyTest->playedCardCount)
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
        -:   90:	{
    #####:   91:		printf("FAILURE: Expeted %i, got %i\n", exPCCA, smithyTest->playedCardCount);
call    0 never executed
        -:   92:	}
        1:   93:	else if (exPCCA==smithyTest->playedCardCount)
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        -:   94:	{
        1:   95:		printf("SUCCESS: Expected %i, got %i\n", exPCCA, smithyTest->playedCardCount);
call    0 returned 100%
        -:   96:	}
        1:   97:	printf("--CHECKING DISCARD FUNCTION--\n");
call    0 returned 100%
        -:   98:	
        1:   99:	printf("Checking that expected card was removed to 'played cards' from the deck for 5 test cases of handPos being 0 through %i\n", save->handCount[rp]);
call    0 returned 100%
        -:  100:	int i;
        1:  101:	int firstHC=save->handCount[rp];
        1:  102:	struct gameState *saveTwo=newGame();
call    0 returned 100%
        1:  103:	*saveTwo=*smithyTest;
        6:  104:	for (i=0; i < firstHC; i++)
branch  0 taken 83%
branch  1 taken 17% (fallthrough)
        -:  105:	{
        5:  106:		printf("--TEST CASE %i for handpost %i--\n", i+2, i);
call    0 returned 100%
        5:  107:		handpos=i;
        5:  108:		cardEffect(card, choice1, choice2, choice3, smithyTest, handpos, &bonus);
call    0 returned 100%
        5:  109:		if (smithyTest->playedCards[smithyTest->playedCardCount-1]==save->hand[rp][handpos])
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        -:  110:		{
        5:  111:			printf("SUCCESS: last played card matches saved hand in position %i: %i==%i\n", handpos, smithyTest->playedCards[smithyTest->playedCardCount-1], save->hand[rp][handpos]);
call    0 returned 100%
        -:  112:		}
        -:  113:		else
        -:  114:		{
    #####:  115:			printf("FAILURE: last played card does NOT match saved hand in position %i: %i!=%i\n", handpos, smithyTest->playedCards[smithyTest->playedCardCount-1], save->hand[rp][handpos]);
call    0 never executed
        -:  116:		}
        5:  117:		*smithyTest=*save;
        -:  118:	}
        1:  119:	*smithyTest=*saveTwo;
        1:  120:	printf("\n\n\n----FINISHED ALL TESTS--\n");
call    0 returned 100%
        -:  121:	
        -:  122:	
        1:  123:	return 0;
        -:  124:}
